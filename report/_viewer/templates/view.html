<!doctype html>
<html>
  <body>
    <h1>{{ pdf }}</h1>
    <iframe id="pdf" src="{{ url_for('pdf_file', folder=folder, pdf=pdf) }}" width="100%" height="800px"></iframe>
    <script>
      let lastMTime = {{ mtime }};
      setInterval(async () => {
        const resp = await fetch("{{ url_for('pdf_mtime', folder=folder, pdf=pdf) }}");
        const data = await resp.json();
        if (data.mtime != lastMTime) {
          lastMTime = data.mtime;
          const pdfFrame = document.getElementById('pdf');
          pdfFrame.src = "{{ url_for('pdf_file', folder=folder, pdf=pdf) }}" + '?t=' + Date.now();
        }
      }, 2000);
    </script>
    <p><a href="{{ url_for('folder_view', folder=folder) }}">Back</a></p>
  </body>
</html>
