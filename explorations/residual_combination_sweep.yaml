# residual_combination_sweep.yaml
---
parameter_groups:
  - attn_residual_combination: ["add"]
    mlp_residual_combination: ["add"]
    tensorboard_run_name: ["attn_add_mlp_add"]
    print_model_stats_table: ["attn_add_mlp_add.csv"]
  - attn_residual_combination: ["add"]
    mlp_residual_combination: ["lerp"]
    tensorboard_run_name: ["attn_add_mlp_lerp"]
    print_model_stats_table: ["attn_add_mlp_lerp.csv"]
  - attn_residual_combination: ["add"]
    mlp_residual_combination: ["slerp"]
    tensorboard_run_name: ["attn_add_mlp_slerp"]
    print_model_stats_table: ["attn_add_mlp_slerp.csv"]
  - attn_residual_combination: ["lerp"]
    mlp_residual_combination: ["add"]
    tensorboard_run_name: ["attn_lerp_mlp_add"]
    print_model_stats_table: ["attn_lerp_mlp_add.csv"]
  - attn_residual_combination: ["lerp"]
    mlp_residual_combination: ["lerp"]
    tensorboard_run_name: ["attn_lerp_mlp_lerp"]
    print_model_stats_table: ["attn_lerp_mlp_lerp.csv"]
  - attn_residual_combination: ["lerp"]
    mlp_residual_combination: ["slerp"]
    tensorboard_run_name: ["attn_lerp_mlp_slerp"]
    print_model_stats_table: ["attn_lerp_mlp_slerp.csv"]
  - attn_residual_combination: ["slerp"]
    mlp_residual_combination: ["add"]
    tensorboard_run_name: ["attn_slerp_mlp_add"]
    print_model_stats_table: ["attn_slerp_mlp_add.csv"]
  - attn_residual_combination: ["slerp"]
    mlp_residual_combination: ["lerp"]
    tensorboard_run_name: ["attn_slerp_mlp_lerp"]
    print_model_stats_table: ["attn_slerp_mlp_lerp.csv"]
  - attn_residual_combination: ["slerp"]
    mlp_residual_combination: ["slerp"]
    tensorboard_run_name: ["attn_slerp_mlp_slerp"]
    print_model_stats_table: ["attn_slerp_mlp_slerp.csv"]

max_iters: [250]
n_layer: [6]
n_head: [6]
n_embd: [384]
block_size: [256]
device: ["cuda"]
dtype: ["bfloat16"]
dataset: ["shakespeare_char"]

# residual alpha strategies
attn_residual_alpha_type: ["fixed", "learned", "dot"]
mlp_residual_alpha_type: ["fixed", "learned", "dot"]

compute_model_stats: [true]
compile: [true]
